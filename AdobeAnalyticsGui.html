<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Adobe Analytics</title>

    <script type="text/javascript">
        // Include version 1 of the base GUI library.
        document.write('<link rel="import" href="' + window.Alteryx.LibDir + '1/lib/alteryx/gui/includes.html">')
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
<!-- Logon Selection Page -->
<fieldset id="authSelect" style="display:none">
    <legend>Sign in to Adobe Analytics</legend>
    <div class="button-panel">
        <button style="width:116px;" class="button" type="submit" id="userButton" onclick="resetFields();userLogin();">User Login</button>
        <p>Sign in using Adobe Analytics credentials. This option requires re-entering credentials every 60 minutes or any time a new workflow is opened.</p>
        <button style="width:116px;" class="button2" type="submit" id="devButton" onclick="resetFields();setPage('#developerCreds')">Developer Login</button>
        <p>Sign in using API credentials. This option requires obtaining a Client ID and Client Secret and does not require re-entering credentials to run a workflow.</p>
    </div>
<!--     <div id="connectionErrorMessage" style="height: 0px;"></div> -->
</fieldset>

<!-- Developer credentials -->
    <fieldset id="developerCreds" style="display:none">
        <legend>Sign in as Developer</legend>
        <label for="dataItemClientID">Client ID</label>
        <alteryx-pluginwidget type="TextBox" id="client_id" dataName="client_id"></alteryx-pluginwidget>
        <br/>
        <label>Client Secret</label>
        <alteryx-pluginwidget type="TextBox" password="true" id="client_secret" dataName="client_secret"></alteryx-pluginwidget>
        <br/>
        <div id="devConnectionErrorMessage" style="height: 0px;"></div>
        <div class='footer_spacer' style="height: 100px;"></div>
        <div class='footer'>
            <hr>
            <div style="margin-top: 8px;margin-bottom: 8px;">
                <button type="submit" style="float: right" id="connect_button" onclick="devLogin();">Connect</button>
             </div>
        <br>
        <br>
        <a href="javascript:void(0)" onclick="resetFields();setPage('#authSelect')">Change Login Credentials</a>
        </div>
    </fieldset>

<!-- Report Suite Selector -->
    <fieldset id="reportSuite" style="display:none">
        <legend>Select Report Suite</legend>
        <label for="dataItemReportSuite">Select Report Suite</label>
        <alteryx-pluginwidget data-props='{type:"ListBox",dataType:"StringSelector",id:"reportSuite",issearchable:"true",dataName:"reportSuite"}'>
        </alteryx-pluginwidget>
        <!-- <div class='footer_spacer'></div> -->
        <div class='footer'>
            <hr>
            <div style="margin-top: 8px;margin-bottom: 8px;">
                <!-- Add id name and onclick function during process story -->
                <button type="submit" class="nextBtn" id="reportSuiteNextBtn" onclick="setPage('#datePickers')">Next</button>
            </div>
            <br>
            <br>
            <a href="javascript:void(0)" onclick="resetFields();setPage('#authSelect')">Change Login Credentials</a>
        </div>
    </fieldset>

<!-- Selectors for Date Pickers and Granularity -->
    <fieldset id="datePickers" style="display:none;">
        <legend>Select Dates to Include</legend>
        <div id="preDefDateRange">
            <label for="preDefDropDown">Preset Date Range</label>
            <alteryx-pluginwidget type="DropDown" id="preDefDropDown" dataName="preDefDropDown">
                <alteryx-option uiobject="Custom">custom</alteryx-option>
                <alteryx-option uiobject="Today">today</alteryx-option>
                <alteryx-option uiobject="Yesterday">yesterday</alteryx-option>
                <alteryx-option uiobject="Last 7 Days">last7Days</alteryx-option>
                <alteryx-option uiobject="Last Week">lastWeek</alteryx-option>
                <alteryx-option uiobject="Last 30 Days">last30Days</alteryx-option>
                <alteryx-option uiobject="Last Month">lastMonth</alteryx-option>
                <alteryx-option uiobject="Month to Date">monthToDate</alteryx-option>
                <alteryx-option uiobject="Year to Date">yearToDate</alteryx-option>
                <alteryx-option uiobject="Last Year">lastYear</alteryx-option>
            </alteryx-pluginwidget>
        </div>
        <br>
        <div id="startDate" class="datePicker">
            <label for="startDatePicker" class="datePickerLabel">Start</label>
            <alteryx-pluginwidget type="DateTimeField" dateFormat="YYYY-MM-DD" id="startDatePicker" dataType="SimpleDate" dataName="startDatePicker"></alteryx-pluginwidget>
        </div>
        <div id="endDate" class="datePicker">
            <label for="endDatePicker" class="datePickerLabel">End</label>
            <alteryx-pluginwidget type="DateTimeField" dateFormat="YYYY-MM-DD" id="endDatePicker" dataType="SimpleDate" dataName="endDatePicker"></alteryx-pluginwidget>
        </div>
        <div id="dateWarning" style="z-index: 1; height:0px;"></div>
        <!-- <div class='footer_spacer'></div> -->
        <p>
        <!-- Granularity section -->
        <fieldset id="granularity" style="display:block;">
            <legend>Select the Granularity of Dates</legend>
            <div id="preDefDateRange">
                <label for="granularity">Granularity</label>
                <alteryx-pluginwidget data-props='{type:"DropDown",id:"granularity",dataName:"granularity",clearable:"true"}'>
                    <alteryx-option uiobject="Hour">hour</alteryx-option>
                    <alteryx-option uiobject="Day">day</alteryx-option>
                    <alteryx-option uiobject="Week">week</alteryx-option>
                    <alteryx-option uiobject="Month">month</alteryx-option>
                    <alteryx-option uiobject="Quarter">quarter</alteryx-option>
                    <alteryx-option uiobject="Year">year</alteryx-option>
                </alteryx-widget>
            </div>
        </fieldset>

        <div class='footer'>
            <hr>
            <div style="margin-top: 8px;margin-bottom: 8px;">
                <!-- Add id name and onclick function during process story -->
                <button type="submit" class="nextBtn" id="datePickersNextBtn" onclick="">Next</button>
                <button class="prevBtn" id="datePickersPrevBtn" onclick="setPage('#reportSuite');">Previous</button>
            </div>
            <br>
            <br>
            <a href="javascript:void(0)" onclick="resetFields();setPage('#authSelect')">Change Login Credentials</a>
        </div>
    </fieldset>

<!-- Store values - never displayed -->
    <fieldset id="store" style="display:none">
        <alteryx-pluginwidget type="TextBox" id="access_token" dataName="access_token"></alteryx-pluginwidget>
        <alteryx-pluginwidget type="TextBox" id="page" dataName="page"></alteryx-pluginwidget>
        <alteryx-pluginwidget type="TextBox" id="errorStatus" dataName="errorStatus"></alteryx-pluginwidget>
    </fieldset>

<!-- Error and Loading Messaging -->
    <div id="userConnectionErrorMessage"></div>
    <div id="app"></div>
    <div id="loading" class="loading" style="display:none;"></div>
    <div id="loading-inner" class="loading-inner" style="display:none;">
        <img src="loading_ring.svg">
    </div>

</body>
<script type="text/javascript" src="bundle.js">
</script>
</html>

<!-- <fieldset id="reportOptions">
    <legend>Adobe Analytics</legend>
    <label for="reportSuite">Report Suite</label>
    <alteryx-pluginwidget type="ComboBox" id="reportSuite" dataname="reportSuite">
    </alteryx-pluginwidget>
    </br>
    </br>
    <fieldset id="reportBreakdown">
        <legend>Report Breakdown</legend>
        <label for="metrics">Metric</label>
        <alteryx-pluginwidget type="ComboBox" id="metrics" dataname="metrics" clearable="true">
        </alteryx-pluginwidget>
        </br>

        <label for="elements">Element (1)</label>
        <alteryx-pluginwidget type="ComboBox" id="elements" dataname="elements" clearable="true">
        </alteryx-pluginwidget>
        </br>

        <label for="elements">Element (2)</label>
        <alteryx-pluginwidget type="ComboBox" id="elementTwo" dataname="elementTwo" clearable="true">
        </alteryx-pluginwidget>
        </br>

        <label for="elements">Element (3)</label>
        <alteryx-pluginwidget type="ComboBox" id="elementThree" dataname="elementThree" clearable="true">
        </alteryx-pluginwidget>

    </fieldset>
    </br>
    <fieldset id="advancedOptions">
        <legend>Advanced Options</legend>
        <label for="date1">Start</label>
        <alteryx-pluginwidget type="DateTimeField" dateFormat="YYYY-MM-DD" id="date1" dataType="SimpleDate"
                              dataname="dateFrom">
        </alteryx-pluginwidget>
        <label for="date2">End</label>
        <alteryx-pluginwidget type="DateTimeField" dateFormat="YYYY-MM-DD" id="date2" dataType="SimpleDate"
                              dataname="dateTo">
        </alteryx-pluginwidget>
        <label for="granularity">Granularity</label>
        <alteryx-pluginwidget type="ComboBox" id="granularity" dataname="granularity" clearable="true">
            <alteryx-option>Hour</alteryx-option>
            <alteryx-option>Day</alteryx-option>
            <alteryx-option>Week</alteryx-option>
            <alteryx-option>Month</alteryx-option>
            <alteryx-option>Quarter</alteryx-option>
            <alteryx-option>Year</alteryx-option>
        </alteryx-pluginwidget>
        </br>
        <label for="dataCenter">Data Center</label>
        <alteryx-pluginwidget type="DropDown" id="dataCenter" dataname="dataCenter">
            <alteryx-option default uiobject="San Jose">api.omniture.com</alteryx-option>
            <alteryx-option uiobject="Dallas">api2.omniture.com</alteryx-option>
            <alteryx-option uiobject="London">api3.omniture.com</alteryx-option>
            <alteryx-option uiobject="Singapore">api4.omniture.com</alteryx-option>
            <alteryx-option uiobject="Pacific Northwest">api5.omniture.com</alteryx-option>
        </alteryx-pluginwidget>
        </br>
        <alteryx-pluginwidget type="CheckBox" id="jsonParse" dataName="jsonParse"
                              ischecked="true" text="Attempt to Parse Report"></alteryx-pluginwidget>
        </br>
        <div class="alignment_container">
            <a href="javascript:void(0)" onclick="changeCredentials()">Change Login Credentials</a>
        </div>
    </fieldset>
</fieldset> -->
<!--
<fieldset id=test style="display:none">
    <alteryx-pluginwidget id="token" dataname="token" type="TextBox"></alteryx-pluginwidget>
    <alteryx-pluginwidget id="baseURL" dataname="baseURL" type="TextBox"></alteryx-pluginwidget>
    <alteryx-pluginwidget id="auth" dataname="auth" type="TextBox"></alteryx-pluginwidget>
</fieldset> -->
